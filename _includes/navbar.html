<!-- <nav class="topnav">
    <div class="topnav-left">
        <a href="/">Home</a>
        <div class="dropdown">
            <button class="dropbtn">Rezepte
                <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
                <a href="/sweet-recepies">Süße Rezepte</a>
                <a href="/salty-recepies">Salzige Rezepte</a>
            </div>
        </div>
    </div>
    <div class="topnav-right">
        <a>Über mich</a>
    </div>
</nav> -->

{% assign cats = site.recipes
  | where:"layout","recipe"
  | map:"category" | compact | uniq | sort %}

<nav class="topnav">
  <div class="topnav-left">
    <a href="{{ '/' | relative_url }}">Home</a>

    <div class="dropdown">
      <button class="dropbtn">Rezepte</button>
      <div class="dropdown-content">
        {% for c in cats %}
          <div class="dropdown-category">
            <strong>{{ c }}</strong>
            <ul>
              {% assign subs = site.recipes
                | where:"layout","recipe"
                | where:"category", c
                | map:"subcategory" | compact | uniq | sort %}

              {% for s in subs %}
                {% assign landing = site.recipes
                  | where:"layout","category"
                  | where:"category", c
                  | where:"subcategory", s
                  | first %}

                <li>
                  {% if landing %}
                    <a href="{{ landing.url | relative_url }}">{{ s }}</a>
                  {% else %}
                    {# Fallback: falls (noch) keine Landing existiert #}
                    <a href="{{ '/recipes/' | append:(s | slugify) | append:'/' | relative_url }}">{{ s }}</a>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <div class="topnav-right">
    <a href="{{ '/about' | relative_url }}">Über mich</a>
  </div>
</nav>
